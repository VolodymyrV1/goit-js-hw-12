{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n\nconst API_KEY = \"52413922-df6c611514e1fbd211f3ba691\";\n\n\n// Ця функція повинна приймати один параметр query (пошукове слово, яке є рядком), здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\n\nexport default async function getImagesByQuery(query, page = 1) {\n    const { data } = await axios(\"https://pixabay.com/api/\", {\n        params: {\n            key: API_KEY,\n            q: query,\n            page,\n            per_page: 15,\n\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true\n        }\n    })\n    return data;\n    \n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nlet lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\n\n// Ця функція повинна приймати масив images, створювати HTML-розмітку для галереї, додавати її в контейнер галереї та викликати метод екземпляра SimpleLightbox refresh(). Нічого не повертає.\n\nexport function createGallery(images) {\n    const gallery = document.querySelector(\".gallery\");\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li class=\"photo-card\">\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\"  class=\"img-card\"/>\n                </a>\n                <div class=\"photo-info\">\n                    <div class=\"info-item\">\n                        <span class=\"label\">Likes</span>\n                        <span class=\"value\">${likes}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"label\">Views</span>\n                        <span class=\"value\">${views}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"label\">Comments</span>\n                        <span class=\"value\">${comments}</span>\n                    </div>\n                    <div class=\"info-item\">\n                        <span class=\"label\">Downloads</span>\n                        <span class=\"value\">${downloads}</span>\n                    </div>\n                </div>          \n            </li>\n            `).join(\"\");\n    \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();       \n}\n\n\n\n// Ця функція нічого не приймає та повинна очищати вміст контейнера галереї. Нічого не повертає.\nexport function clearGallery() {\n    document.querySelector(\".gallery\").innerHTML = \"\";\n}\n\n// Ця функція нічого не приймає, повинна додавати клас для відображення лоадера. Нічого не повертає.\nexport function showLoader() {\n    document.querySelector(\".loader\").classList.remove(\"hidden\");\n}\n\n\n// Ця функція нічого не приймає, повинна прибирати клас для відображення лоадера. Нічого не повертає.\nexport function hideLoader() {\n    document.querySelector(\".loader\").classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n\n}\n\nexport function hideLoadMoreButton() {\n    \n}","import './css/comon.css';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport getImagesByQuery from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader } from \"./js/render-functions\";\n\n\nconst form = document.querySelector(\".form\");\nconst searchBtn = document.querySelector(\".searchBtn\");\nconst moreBtn = document.querySelector(\".moreBtn\");\nlet searchResult;\n\nlet page;\n\n\nform.addEventListener(\"submit\", handlerSubmit);\nmoreBtn.addEventListener(\"click\", onLoadMore);\n\nfunction handlerSubmit(event) {\n    event.preventDefault();\n    page = 32;\n    searchBtn.disabled = true;\n    clearGallery();\n    searchResult = event.target.elements['search-text'].value.trim();\n\n    if (searchResult === \"\") {\n        showToast(\"Sorry, you didn’t enter any value!\");\n        form.reset();\n        return;\n    }\n\n    showLoader();\n    \n    getImagesByQuery(searchResult, page)\n        .then((data) => {\n           \n            if (data.hits.length === 0) {\n                showToast(\"Sorry, there are no images matching your search query. Please try again!\");\n                return;\n            }       \n            createGallery(data.hits);\n            console.log(data.hits);\n            moreBtn.classList.remove(\"hidden\");\n            // if(data.totalHits ) {\n            //     console.log(\"hyetaaa\");\n                \n            // }\n            \n        })\n        .catch((error) => {\n            showToast(`EROR, ${error}`);\n            console.log(error);     \n        })\n        .finally(() => {            \n            hideLoader();\n        })\n    \n        form.reset()   \n}\n\nasync function onLoadMore() {\n    page += 1;\n    moreBtn.disabled = true;\n    showLoader();\n\n        try {\n            const data = await getImagesByQuery(searchResult, page);\n            console.log(data);\n            console.log(page);\n            \n            createGallery(data.hits);\n\n\n        } catch(error) {\n            console.log(error);\n            \n            \n        } finally {\n            \n            moreBtn.disabled = false;\n            hideLoader();\n\n        }\n    \n}\n\n\n\n\n\nfunction showToast(message, ) {\n    iziToast.error({\n        message,\n        position: 'topRight',\n        backgroundColor: '#EF4040',\n        messageColor: '#ffffff',\n    });\n}\n\n\nfunction totalHits(data) {\n    const totalPage = Math.ceil(data.totalHits / data.length)\n    console.log(totalPage);\n    \n    if(page > totalPage ) {\n        console.log(\"HYETAAAAAA\");\n        moreBtn.classList.add(\"hidden\");\n        console.log(totalPage);\n        \n        \n    }\n    \n}\n\n    \n"],"names":["API_KEY","getImagesByQuery","query","page","data","axios","lightbox","SimpleLightbox","createGallery","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","form","searchBtn","moreBtn","searchResult","handlerSubmit","onLoadMore","event","showToast","error","message","iziToast"],"mappings":"owBAGA,MAAMA,EAAU,qCAKD,eAAeC,EAAiBC,EAAOC,EAAO,EAAG,CAC5D,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,2BAA4B,CACrD,OAAQ,CACJ,IAAKL,EACL,EAAGE,EACH,KAAAC,EACA,SAAU,GAEV,WAAY,QACZ,YAAa,aACb,WAAY,EACf,CACT,CAAK,EACD,OAAOC,CAEX,CCnBA,IAAIE,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAKM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,2BAEjFL,CAAa;AAAA,gCACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,8CAKZC,CAAK;AAAA;AAAA;AAAA;AAAA,8CAILC,CAAK;AAAA;AAAA;AAAA;AAAA,8CAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,8CAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,aAI1C,EAAE,KAAK,EAAE,EAElBR,EAAQ,mBAAmB,YAAaC,CAAM,EAC9CL,EAAS,QAAO,CACpB,CAKO,SAASa,GAAe,CAC3B,SAAS,cAAc,UAAU,EAAE,UAAY,EACnD,CAGO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,QAAQ,CAC/D,CAIO,SAASC,GAAa,CACzB,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,QAAQ,CAC5D,CCnDA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAEAtB,EAGJmB,EAAK,iBAAiB,SAAUI,CAAa,EAC7CF,EAAQ,iBAAiB,QAASG,CAAU,EAE5C,SAASD,EAAcE,EAAO,CAO1B,GANAA,EAAM,eAAc,EACpBzB,EAAO,GACPoB,EAAU,SAAW,GACrBJ,IACAM,EAAeG,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OAEtDH,IAAiB,GAAI,CACrBI,EAAU,oCAAoC,EAC9CP,EAAK,MAAK,EACV,MACH,CAEDF,IAEAnB,EAAiBwB,EAActB,CAAI,EAC9B,KAAMC,GAAS,CAEZ,GAAIA,EAAK,KAAK,SAAW,EAAG,CACxByB,EAAU,0EAA0E,EACpF,MACH,CACDrB,EAAcJ,EAAK,IAAI,EACvB,QAAQ,IAAIA,EAAK,IAAI,EACrBoB,EAAQ,UAAU,OAAO,QAAQ,CAM7C,CAAS,EACA,MAAOM,GAAU,CACdD,EAAU,SAASC,CAAK,EAAE,EAC1B,QAAQ,IAAIA,CAAK,CAC7B,CAAS,EACA,QAAQ,IAAM,CACXT,GACZ,CAAS,EAEDC,EAAK,MAAO,CACpB,CAEA,eAAeK,GAAa,CACxBxB,GAAQ,EACRqB,EAAQ,SAAW,GACnBJ,IAEI,GAAI,CACA,MAAMhB,EAAO,MAAMH,EAAiBwB,EAActB,CAAI,EACtD,QAAQ,IAAIC,CAAI,EAChB,QAAQ,IAAID,CAAI,EAEhBK,EAAcJ,EAAK,IAAI,CAG1B,OAAO0B,EAAO,CACX,QAAQ,IAAIA,CAAK,CAG7B,QAAkB,CAENN,EAAQ,SAAW,GACnBH,GAEH,CAET,CAMA,SAASQ,EAAUE,EAAW,CAC1BC,EAAS,MAAM,CACX,QAAAD,EACA,SAAU,WACV,gBAAiB,UACjB,aAAc,SACtB,CAAK,CACL"}